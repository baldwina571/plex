<html>
<head>
<title>sysconfig.py</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<style type="text/css">
.s0 { color: #475f76;}
.s1 { color: #b6c4f2;}
.s2 { color: #b877db; font-style: italic;}
.s3 { color: #b4c2f0;}
.s4 { color: #baacff;}
.s5 { color: #7fdaff;}
.s6 { color: #64d1a9;}
.s7 { color: #ff9668;}
</style>
</head>
<body bgcolor="#1c1e26">
<table CELLSPACING=0 CELLPADDING=5 COLS=1 WIDTH="100%" BGCOLOR="#606060" >
<tr><td><center>
<font face="Arial, Helvetica" color="#000000">
sysconfig.py</font>
</center></td></tr></table>
<pre><span class="s0"># -*- coding: utf-8 -*-</span>
<span class="s0">#</span>
<span class="s0"># Copyright (C) 2012 The Python Software Foundation.</span>
<span class="s0"># See LICENSE.txt and CONTRIBUTORS.txt.</span>
<span class="s0">#</span>
<span class="s0">&quot;&quot;&quot;Access to Python's configuration information.&quot;&quot;&quot;</span>

<span class="s2">import </span><span class="s1">codecs</span>
<span class="s2">import </span><span class="s1">os</span>
<span class="s2">import </span><span class="s1">re</span>
<span class="s2">import </span><span class="s1">sys</span>
<span class="s2">from </span><span class="s1">os</span><span class="s3">.</span><span class="s1">path </span><span class="s2">import </span><span class="s1">pardir</span><span class="s3">, </span><span class="s1">realpath</span>
<span class="s2">try</span><span class="s4">:</span>
    <span class="s2">import </span><span class="s1">configparser</span>
<span class="s2">except </span><span class="s1">ImportError</span><span class="s4">:</span>
    <span class="s2">import </span><span class="s1">ConfigParser </span><span class="s2">as </span><span class="s1">configparser</span>


<span class="s1">__all__ </span><span class="s4">= </span><span class="s5">[</span>
    <span class="s6">'get_config_h_filename'</span><span class="s3">,</span>
    <span class="s6">'get_config_var'</span><span class="s3">,</span>
    <span class="s6">'get_config_vars'</span><span class="s3">,</span>
    <span class="s6">'get_makefile_filename'</span><span class="s3">,</span>
    <span class="s6">'get_path'</span><span class="s3">,</span>
    <span class="s6">'get_path_names'</span><span class="s3">,</span>
    <span class="s6">'get_paths'</span><span class="s3">,</span>
    <span class="s6">'get_platform'</span><span class="s3">,</span>
    <span class="s6">'get_python_version'</span><span class="s3">,</span>
    <span class="s6">'get_scheme_names'</span><span class="s3">,</span>
    <span class="s6">'parse_config_h'</span><span class="s3">,</span>
<span class="s5">]</span>


<span class="s2">def </span><span class="s1">_safe_realpath</span><span class="s3">(</span><span class="s1">path</span><span class="s3">)</span><span class="s4">:</span>
    <span class="s2">try</span><span class="s4">:</span>
        <span class="s2">return </span><span class="s1">realpath</span><span class="s3">(</span><span class="s1">path</span><span class="s3">)</span>
    <span class="s2">except </span><span class="s1">OSError</span><span class="s4">:</span>
        <span class="s2">return </span><span class="s1">path</span>


<span class="s2">if </span><span class="s1">sys</span><span class="s3">.</span><span class="s1">executable</span><span class="s4">:</span>
    <span class="s1">_PROJECT_BASE </span><span class="s4">= </span><span class="s1">os</span><span class="s3">.</span><span class="s1">path</span><span class="s3">.</span><span class="s1">dirname</span><span class="s3">(</span><span class="s1">_safe_realpath</span><span class="s3">(</span><span class="s1">sys</span><span class="s3">.</span><span class="s1">executable</span><span class="s3">))</span>
<span class="s2">else</span><span class="s4">:</span>
    <span class="s0"># sys.executable can be empty if argv[0] has been changed and Python is</span>
    <span class="s0"># unable to retrieve the real program name</span>
    <span class="s1">_PROJECT_BASE </span><span class="s4">= </span><span class="s1">_safe_realpath</span><span class="s3">(</span><span class="s1">os</span><span class="s3">.</span><span class="s1">getcwd</span><span class="s3">())</span>

<span class="s2">if </span><span class="s1">os</span><span class="s3">.</span><span class="s1">name </span><span class="s4">== </span><span class="s6">&quot;nt&quot; </span><span class="s2">and </span><span class="s6">&quot;pcbuild&quot; </span><span class="s2">in </span><span class="s1">_PROJECT_BASE</span><span class="s5">[</span><span class="s4">-</span><span class="s7">8</span><span class="s4">:</span><span class="s5">]</span><span class="s3">.</span><span class="s1">lower</span><span class="s3">()</span><span class="s4">:</span>
    <span class="s1">_PROJECT_BASE </span><span class="s4">= </span><span class="s1">_safe_realpath</span><span class="s3">(</span><span class="s1">os</span><span class="s3">.</span><span class="s1">path</span><span class="s3">.</span><span class="s1">join</span><span class="s3">(</span><span class="s1">_PROJECT_BASE</span><span class="s3">, </span><span class="s1">pardir</span><span class="s3">))</span>
<span class="s0"># PC/VS7.1</span>
<span class="s2">if </span><span class="s1">os</span><span class="s3">.</span><span class="s1">name </span><span class="s4">== </span><span class="s6">&quot;nt&quot; </span><span class="s2">and </span><span class="s6">&quot;\\pc\\v&quot; </span><span class="s2">in </span><span class="s1">_PROJECT_BASE</span><span class="s5">[</span><span class="s4">-</span><span class="s7">10</span><span class="s4">:</span><span class="s5">]</span><span class="s3">.</span><span class="s1">lower</span><span class="s3">()</span><span class="s4">:</span>
    <span class="s1">_PROJECT_BASE </span><span class="s4">= </span><span class="s1">_safe_realpath</span><span class="s3">(</span><span class="s1">os</span><span class="s3">.</span><span class="s1">path</span><span class="s3">.</span><span class="s1">join</span><span class="s3">(</span><span class="s1">_PROJECT_BASE</span><span class="s3">, </span><span class="s1">pardir</span><span class="s3">, </span><span class="s1">pardir</span><span class="s3">))</span>
<span class="s0"># PC/AMD64</span>
<span class="s2">if </span><span class="s1">os</span><span class="s3">.</span><span class="s1">name </span><span class="s4">== </span><span class="s6">&quot;nt&quot; </span><span class="s2">and </span><span class="s6">&quot;\\pcbuild\\amd64&quot; </span><span class="s2">in </span><span class="s1">_PROJECT_BASE</span><span class="s5">[</span><span class="s4">-</span><span class="s7">14</span><span class="s4">:</span><span class="s5">]</span><span class="s3">.</span><span class="s1">lower</span><span class="s3">()</span><span class="s4">:</span>
    <span class="s1">_PROJECT_BASE </span><span class="s4">= </span><span class="s1">_safe_realpath</span><span class="s3">(</span><span class="s1">os</span><span class="s3">.</span><span class="s1">path</span><span class="s3">.</span><span class="s1">join</span><span class="s3">(</span><span class="s1">_PROJECT_BASE</span><span class="s3">, </span><span class="s1">pardir</span><span class="s3">, </span><span class="s1">pardir</span><span class="s3">))</span>


<span class="s2">def </span><span class="s1">is_python_build</span><span class="s3">()</span><span class="s4">:</span>
    <span class="s2">for </span><span class="s1">fn </span><span class="s2">in </span><span class="s3">(</span><span class="s6">&quot;Setup.dist&quot;</span><span class="s3">, </span><span class="s6">&quot;Setup.local&quot;</span><span class="s3">)</span><span class="s4">:</span>
        <span class="s2">if </span><span class="s1">os</span><span class="s3">.</span><span class="s1">path</span><span class="s3">.</span><span class="s1">isfile</span><span class="s3">(</span><span class="s1">os</span><span class="s3">.</span><span class="s1">path</span><span class="s3">.</span><span class="s1">join</span><span class="s3">(</span><span class="s1">_PROJECT_BASE</span><span class="s3">, </span><span class="s6">&quot;Modules&quot;</span><span class="s3">, </span><span class="s1">fn</span><span class="s3">))</span><span class="s4">:</span>
            <span class="s2">return True</span>
    <span class="s2">return False</span>

<span class="s1">_PYTHON_BUILD </span><span class="s4">= </span><span class="s1">is_python_build</span><span class="s3">()</span>

<span class="s1">_cfg_read </span><span class="s4">= </span><span class="s2">False</span>

<span class="s2">def </span><span class="s1">_ensure_cfg_read</span><span class="s3">()</span><span class="s4">:</span>
    <span class="s2">global </span><span class="s1">_cfg_read</span>
    <span class="s2">if not </span><span class="s1">_cfg_read</span><span class="s4">:</span>
        <span class="s2">from </span><span class="s3">..</span><span class="s1">resources </span><span class="s2">import </span><span class="s1">finder</span>
        <span class="s1">backport_package </span><span class="s4">= </span><span class="s1">__name__</span><span class="s3">.</span><span class="s1">rsplit</span><span class="s3">(</span><span class="s6">'.'</span><span class="s3">, </span><span class="s7">1</span><span class="s3">)</span><span class="s5">[</span><span class="s7">0</span><span class="s5">]</span>
        <span class="s1">_finder </span><span class="s4">= </span><span class="s1">finder</span><span class="s3">(</span><span class="s1">backport_package</span><span class="s3">)</span>
        <span class="s1">_cfgfile </span><span class="s4">= </span><span class="s1">_finder</span><span class="s3">.</span><span class="s1">find</span><span class="s3">(</span><span class="s6">'sysconfig.cfg'</span><span class="s3">)</span>
        <span class="s2">assert </span><span class="s1">_cfgfile</span><span class="s3">, </span><span class="s6">'sysconfig.cfg exists'</span>
        <span class="s2">with </span><span class="s1">_cfgfile</span><span class="s3">.</span><span class="s1">as_stream</span><span class="s3">() </span><span class="s2">as </span><span class="s1">s</span><span class="s4">:</span>
            <span class="s1">_SCHEMES</span><span class="s3">.</span><span class="s1">readfp</span><span class="s3">(</span><span class="s1">s</span><span class="s3">)</span>
        <span class="s2">if </span><span class="s1">_PYTHON_BUILD</span><span class="s4">:</span>
            <span class="s2">for </span><span class="s1">scheme </span><span class="s2">in </span><span class="s3">(</span><span class="s6">'posix_prefix'</span><span class="s3">, </span><span class="s6">'posix_home'</span><span class="s3">)</span><span class="s4">:</span>
                <span class="s1">_SCHEMES</span><span class="s3">.</span><span class="s1">set</span><span class="s3">(</span><span class="s1">scheme</span><span class="s3">, </span><span class="s6">'include'</span><span class="s3">, </span><span class="s6">'{srcdir}/Include'</span><span class="s3">)</span>
                <span class="s1">_SCHEMES</span><span class="s3">.</span><span class="s1">set</span><span class="s3">(</span><span class="s1">scheme</span><span class="s3">, </span><span class="s6">'platinclude'</span><span class="s3">, </span><span class="s6">'{projectbase}/.'</span><span class="s3">)</span>

        <span class="s1">_cfg_read </span><span class="s4">= </span><span class="s2">True</span>


<span class="s1">_SCHEMES </span><span class="s4">= </span><span class="s1">configparser</span><span class="s3">.</span><span class="s1">RawConfigParser</span><span class="s3">()</span>
<span class="s1">_VAR_REPL </span><span class="s4">= </span><span class="s1">re</span><span class="s3">.</span><span class="s1">compile</span><span class="s3">(</span><span class="s6">r'\{([^{]*?)\}'</span><span class="s3">)</span>

<span class="s2">def </span><span class="s1">_expand_globals</span><span class="s3">(</span><span class="s1">config</span><span class="s3">)</span><span class="s4">:</span>
    <span class="s1">_ensure_cfg_read</span><span class="s3">()</span>
    <span class="s2">if </span><span class="s1">config</span><span class="s3">.</span><span class="s1">has_section</span><span class="s3">(</span><span class="s6">'globals'</span><span class="s3">)</span><span class="s4">:</span>
        <span class="s1">globals </span><span class="s4">= </span><span class="s1">config</span><span class="s3">.</span><span class="s1">items</span><span class="s3">(</span><span class="s6">'globals'</span><span class="s3">)</span>
    <span class="s2">else</span><span class="s4">:</span>
        <span class="s1">globals </span><span class="s4">= </span><span class="s1">tuple</span><span class="s3">()</span>

    <span class="s1">sections </span><span class="s4">= </span><span class="s1">config</span><span class="s3">.</span><span class="s1">sections</span><span class="s3">()</span>
    <span class="s2">for </span><span class="s1">section </span><span class="s2">in </span><span class="s1">sections</span><span class="s4">:</span>
        <span class="s2">if </span><span class="s1">section </span><span class="s4">== </span><span class="s6">'globals'</span><span class="s4">:</span>
            <span class="s2">continue</span>
        <span class="s2">for </span><span class="s1">option</span><span class="s3">, </span><span class="s1">value </span><span class="s2">in </span><span class="s1">globals</span><span class="s4">:</span>
            <span class="s2">if </span><span class="s1">config</span><span class="s3">.</span><span class="s1">has_option</span><span class="s3">(</span><span class="s1">section</span><span class="s3">, </span><span class="s1">option</span><span class="s3">)</span><span class="s4">:</span>
                <span class="s2">continue</span>
            <span class="s1">config</span><span class="s3">.</span><span class="s1">set</span><span class="s3">(</span><span class="s1">section</span><span class="s3">, </span><span class="s1">option</span><span class="s3">, </span><span class="s1">value</span><span class="s3">)</span>
    <span class="s1">config</span><span class="s3">.</span><span class="s1">remove_section</span><span class="s3">(</span><span class="s6">'globals'</span><span class="s3">)</span>

    <span class="s0"># now expanding local variables defined in the cfg file</span>
    <span class="s0">#</span>
    <span class="s2">for </span><span class="s1">section </span><span class="s2">in </span><span class="s1">config</span><span class="s3">.</span><span class="s1">sections</span><span class="s3">()</span><span class="s4">:</span>
        <span class="s1">variables </span><span class="s4">= </span><span class="s1">dict</span><span class="s3">(</span><span class="s1">config</span><span class="s3">.</span><span class="s1">items</span><span class="s3">(</span><span class="s1">section</span><span class="s3">))</span>

        <span class="s2">def </span><span class="s1">_replacer</span><span class="s3">(</span><span class="s1">matchobj</span><span class="s3">)</span><span class="s4">:</span>
            <span class="s1">name </span><span class="s4">= </span><span class="s1">matchobj</span><span class="s3">.</span><span class="s1">group</span><span class="s3">(</span><span class="s7">1</span><span class="s3">)</span>
            <span class="s2">if </span><span class="s1">name </span><span class="s2">in </span><span class="s1">variables</span><span class="s4">:</span>
                <span class="s2">return </span><span class="s1">variables</span><span class="s5">[</span><span class="s1">name</span><span class="s5">]</span>
            <span class="s2">return </span><span class="s1">matchobj</span><span class="s3">.</span><span class="s1">group</span><span class="s3">(</span><span class="s7">0</span><span class="s3">)</span>

        <span class="s2">for </span><span class="s1">option</span><span class="s3">, </span><span class="s1">value </span><span class="s2">in </span><span class="s1">config</span><span class="s3">.</span><span class="s1">items</span><span class="s3">(</span><span class="s1">section</span><span class="s3">)</span><span class="s4">:</span>
            <span class="s1">config</span><span class="s3">.</span><span class="s1">set</span><span class="s3">(</span><span class="s1">section</span><span class="s3">, </span><span class="s1">option</span><span class="s3">, </span><span class="s1">_VAR_REPL</span><span class="s3">.</span><span class="s1">sub</span><span class="s3">(</span><span class="s1">_replacer</span><span class="s3">, </span><span class="s1">value</span><span class="s3">))</span>

<span class="s0">#_expand_globals(_SCHEMES)</span>

<span class="s1">_PY_VERSION </span><span class="s4">= </span><span class="s6">'%s.%s.%s' </span><span class="s4">% </span><span class="s1">sys</span><span class="s3">.</span><span class="s1">version_info</span><span class="s5">[</span><span class="s4">:</span><span class="s7">3</span><span class="s5">]</span>
<span class="s1">_PY_VERSION_SHORT </span><span class="s4">= </span><span class="s6">'%s.%s' </span><span class="s4">% </span><span class="s1">sys</span><span class="s3">.</span><span class="s1">version_info</span><span class="s5">[</span><span class="s4">:</span><span class="s7">2</span><span class="s5">]</span>
<span class="s1">_PY_VERSION_SHORT_NO_DOT </span><span class="s4">= </span><span class="s6">'%s%s' </span><span class="s4">% </span><span class="s1">sys</span><span class="s3">.</span><span class="s1">version_info</span><span class="s5">[</span><span class="s4">:</span><span class="s7">2</span><span class="s5">]</span>
<span class="s1">_PREFIX </span><span class="s4">= </span><span class="s1">os</span><span class="s3">.</span><span class="s1">path</span><span class="s3">.</span><span class="s1">normpath</span><span class="s3">(</span><span class="s1">sys</span><span class="s3">.</span><span class="s1">prefix</span><span class="s3">)</span>
<span class="s1">_EXEC_PREFIX </span><span class="s4">= </span><span class="s1">os</span><span class="s3">.</span><span class="s1">path</span><span class="s3">.</span><span class="s1">normpath</span><span class="s3">(</span><span class="s1">sys</span><span class="s3">.</span><span class="s1">exec_prefix</span><span class="s3">)</span>
<span class="s1">_CONFIG_VARS </span><span class="s4">= </span><span class="s2">None</span>
<span class="s1">_USER_BASE </span><span class="s4">= </span><span class="s2">None</span>


<span class="s2">def </span><span class="s1">_subst_vars</span><span class="s3">(</span><span class="s1">path</span><span class="s3">, </span><span class="s1">local_vars</span><span class="s3">)</span><span class="s4">:</span>
    <span class="s0">&quot;&quot;&quot;In the string `path`, replace tokens like {some.thing} with the 
    corresponding value from the map `local_vars`. 
 
    If there is no corresponding value, leave the token unchanged. 
    &quot;&quot;&quot;</span>
    <span class="s2">def </span><span class="s1">_replacer</span><span class="s3">(</span><span class="s1">matchobj</span><span class="s3">)</span><span class="s4">:</span>
        <span class="s1">name </span><span class="s4">= </span><span class="s1">matchobj</span><span class="s3">.</span><span class="s1">group</span><span class="s3">(</span><span class="s7">1</span><span class="s3">)</span>
        <span class="s2">if </span><span class="s1">name </span><span class="s2">in </span><span class="s1">local_vars</span><span class="s4">:</span>
            <span class="s2">return </span><span class="s1">local_vars</span><span class="s5">[</span><span class="s1">name</span><span class="s5">]</span>
        <span class="s2">elif </span><span class="s1">name </span><span class="s2">in </span><span class="s1">os</span><span class="s3">.</span><span class="s1">environ</span><span class="s4">:</span>
            <span class="s2">return </span><span class="s1">os</span><span class="s3">.</span><span class="s1">environ</span><span class="s5">[</span><span class="s1">name</span><span class="s5">]</span>
        <span class="s2">return </span><span class="s1">matchobj</span><span class="s3">.</span><span class="s1">group</span><span class="s3">(</span><span class="s7">0</span><span class="s3">)</span>
    <span class="s2">return </span><span class="s1">_VAR_REPL</span><span class="s3">.</span><span class="s1">sub</span><span class="s3">(</span><span class="s1">_replacer</span><span class="s3">, </span><span class="s1">path</span><span class="s3">)</span>


<span class="s2">def </span><span class="s1">_extend_dict</span><span class="s3">(</span><span class="s1">target_dict</span><span class="s3">, </span><span class="s1">other_dict</span><span class="s3">)</span><span class="s4">:</span>
    <span class="s1">target_keys </span><span class="s4">= </span><span class="s1">target_dict</span><span class="s3">.</span><span class="s1">keys</span><span class="s3">()</span>
    <span class="s2">for </span><span class="s1">key</span><span class="s3">, </span><span class="s1">value </span><span class="s2">in </span><span class="s1">other_dict</span><span class="s3">.</span><span class="s1">items</span><span class="s3">()</span><span class="s4">:</span>
        <span class="s2">if </span><span class="s1">key </span><span class="s2">in </span><span class="s1">target_keys</span><span class="s4">:</span>
            <span class="s2">continue</span>
        <span class="s1">target_dict</span><span class="s5">[</span><span class="s1">key</span><span class="s5">] </span><span class="s4">= </span><span class="s1">value</span>


<span class="s2">def </span><span class="s1">_expand_vars</span><span class="s3">(</span><span class="s1">scheme</span><span class="s3">, </span><span class="s1">vars</span><span class="s3">)</span><span class="s4">:</span>
    <span class="s1">res </span><span class="s4">= </span><span class="s5">{}</span>
    <span class="s2">if </span><span class="s1">vars </span><span class="s2">is None</span><span class="s4">:</span>
        <span class="s1">vars </span><span class="s4">= </span><span class="s5">{}</span>
    <span class="s1">_extend_dict</span><span class="s3">(</span><span class="s1">vars</span><span class="s3">, </span><span class="s1">get_config_vars</span><span class="s3">())</span>

    <span class="s2">for </span><span class="s1">key</span><span class="s3">, </span><span class="s1">value </span><span class="s2">in </span><span class="s1">_SCHEMES</span><span class="s3">.</span><span class="s1">items</span><span class="s3">(</span><span class="s1">scheme</span><span class="s3">)</span><span class="s4">:</span>
        <span class="s2">if </span><span class="s1">os</span><span class="s3">.</span><span class="s1">name </span><span class="s2">in </span><span class="s3">(</span><span class="s6">'posix'</span><span class="s3">, </span><span class="s6">'nt'</span><span class="s3">)</span><span class="s4">:</span>
            <span class="s1">value </span><span class="s4">= </span><span class="s1">os</span><span class="s3">.</span><span class="s1">path</span><span class="s3">.</span><span class="s1">expanduser</span><span class="s3">(</span><span class="s1">value</span><span class="s3">)</span>
        <span class="s1">res</span><span class="s5">[</span><span class="s1">key</span><span class="s5">] </span><span class="s4">= </span><span class="s1">os</span><span class="s3">.</span><span class="s1">path</span><span class="s3">.</span><span class="s1">normpath</span><span class="s3">(</span><span class="s1">_subst_vars</span><span class="s3">(</span><span class="s1">value</span><span class="s3">, </span><span class="s1">vars</span><span class="s3">))</span>
    <span class="s2">return </span><span class="s1">res</span>


<span class="s2">def </span><span class="s1">format_value</span><span class="s3">(</span><span class="s1">value</span><span class="s3">, </span><span class="s1">vars</span><span class="s3">)</span><span class="s4">:</span>
    <span class="s2">def </span><span class="s1">_replacer</span><span class="s3">(</span><span class="s1">matchobj</span><span class="s3">)</span><span class="s4">:</span>
        <span class="s1">name </span><span class="s4">= </span><span class="s1">matchobj</span><span class="s3">.</span><span class="s1">group</span><span class="s3">(</span><span class="s7">1</span><span class="s3">)</span>
        <span class="s2">if </span><span class="s1">name </span><span class="s2">in </span><span class="s1">vars</span><span class="s4">:</span>
            <span class="s2">return </span><span class="s1">vars</span><span class="s5">[</span><span class="s1">name</span><span class="s5">]</span>
        <span class="s2">return </span><span class="s1">matchobj</span><span class="s3">.</span><span class="s1">group</span><span class="s3">(</span><span class="s7">0</span><span class="s3">)</span>
    <span class="s2">return </span><span class="s1">_VAR_REPL</span><span class="s3">.</span><span class="s1">sub</span><span class="s3">(</span><span class="s1">_replacer</span><span class="s3">, </span><span class="s1">value</span><span class="s3">)</span>


<span class="s2">def </span><span class="s1">_get_default_scheme</span><span class="s3">()</span><span class="s4">:</span>
    <span class="s2">if </span><span class="s1">os</span><span class="s3">.</span><span class="s1">name </span><span class="s4">== </span><span class="s6">'posix'</span><span class="s4">:</span>
        <span class="s0"># the default scheme for posix is posix_prefix</span>
        <span class="s2">return </span><span class="s6">'posix_prefix'</span>
    <span class="s2">return </span><span class="s1">os</span><span class="s3">.</span><span class="s1">name</span>


<span class="s2">def </span><span class="s1">_getuserbase</span><span class="s3">()</span><span class="s4">:</span>
    <span class="s1">env_base </span><span class="s4">= </span><span class="s1">os</span><span class="s3">.</span><span class="s1">environ</span><span class="s3">.</span><span class="s1">get</span><span class="s3">(</span><span class="s6">&quot;PYTHONUSERBASE&quot;</span><span class="s3">, </span><span class="s2">None</span><span class="s3">)</span>

    <span class="s2">def </span><span class="s1">joinuser</span><span class="s3">(</span><span class="s4">*</span><span class="s1">args</span><span class="s3">)</span><span class="s4">:</span>
        <span class="s2">return </span><span class="s1">os</span><span class="s3">.</span><span class="s1">path</span><span class="s3">.</span><span class="s1">expanduser</span><span class="s3">(</span><span class="s1">os</span><span class="s3">.</span><span class="s1">path</span><span class="s3">.</span><span class="s1">join</span><span class="s3">(</span><span class="s4">*</span><span class="s1">args</span><span class="s3">))</span>

    <span class="s0"># what about 'os2emx', 'riscos' ?</span>
    <span class="s2">if </span><span class="s1">os</span><span class="s3">.</span><span class="s1">name </span><span class="s4">== </span><span class="s6">&quot;nt&quot;</span><span class="s4">:</span>
        <span class="s1">base </span><span class="s4">= </span><span class="s1">os</span><span class="s3">.</span><span class="s1">environ</span><span class="s3">.</span><span class="s1">get</span><span class="s3">(</span><span class="s6">&quot;APPDATA&quot;</span><span class="s3">) </span><span class="s2">or </span><span class="s6">&quot;~&quot;</span>
        <span class="s2">if </span><span class="s1">env_base</span><span class="s4">:</span>
            <span class="s2">return </span><span class="s1">env_base</span>
        <span class="s2">else</span><span class="s4">:</span>
            <span class="s2">return </span><span class="s1">joinuser</span><span class="s3">(</span><span class="s1">base</span><span class="s3">, </span><span class="s6">&quot;Python&quot;</span><span class="s3">)</span>

    <span class="s2">if </span><span class="s1">sys</span><span class="s3">.</span><span class="s1">platform </span><span class="s4">== </span><span class="s6">&quot;darwin&quot;</span><span class="s4">:</span>
        <span class="s1">framework </span><span class="s4">= </span><span class="s1">get_config_var</span><span class="s3">(</span><span class="s6">&quot;PYTHONFRAMEWORK&quot;</span><span class="s3">)</span>
        <span class="s2">if </span><span class="s1">framework</span><span class="s4">:</span>
            <span class="s2">if </span><span class="s1">env_base</span><span class="s4">:</span>
                <span class="s2">return </span><span class="s1">env_base</span>
            <span class="s2">else</span><span class="s4">:</span>
                <span class="s2">return </span><span class="s1">joinuser</span><span class="s3">(</span><span class="s6">&quot;~&quot;</span><span class="s3">, </span><span class="s6">&quot;Library&quot;</span><span class="s3">, </span><span class="s1">framework</span><span class="s3">, </span><span class="s6">&quot;%d.%d&quot; </span><span class="s4">%</span>
                                <span class="s1">sys</span><span class="s3">.</span><span class="s1">version_info</span><span class="s5">[</span><span class="s4">:</span><span class="s7">2</span><span class="s5">]</span><span class="s3">)</span>

    <span class="s2">if </span><span class="s1">env_base</span><span class="s4">:</span>
        <span class="s2">return </span><span class="s1">env_base</span>
    <span class="s2">else</span><span class="s4">:</span>
        <span class="s2">return </span><span class="s1">joinuser</span><span class="s3">(</span><span class="s6">&quot;~&quot;</span><span class="s3">, </span><span class="s6">&quot;.local&quot;</span><span class="s3">)</span>


<span class="s2">def </span><span class="s1">_parse_makefile</span><span class="s3">(</span><span class="s1">filename</span><span class="s3">, </span><span class="s1">vars</span><span class="s4">=</span><span class="s2">None</span><span class="s3">)</span><span class="s4">:</span>
    <span class="s0">&quot;&quot;&quot;Parse a Makefile-style file. 
 
    A dictionary containing name/value pairs is returned.  If an 
    optional dictionary is passed in as the second argument, it is 
    used instead of a new dictionary. 
    &quot;&quot;&quot;</span>
    <span class="s0"># Regexes needed for parsing Makefile (and similar syntaxes,</span>
    <span class="s0"># like old-style Setup files).</span>
    <span class="s1">_variable_rx </span><span class="s4">= </span><span class="s1">re</span><span class="s3">.</span><span class="s1">compile</span><span class="s3">(</span><span class="s6">r&quot;([a-zA-Z][a-zA-Z0-9_]+)\s*=\s*(.*)&quot;</span><span class="s3">)</span>
    <span class="s1">_findvar1_rx </span><span class="s4">= </span><span class="s1">re</span><span class="s3">.</span><span class="s1">compile</span><span class="s3">(</span><span class="s6">r&quot;\$\(([A-Za-z][A-Za-z0-9_]*)\)&quot;</span><span class="s3">)</span>
    <span class="s1">_findvar2_rx </span><span class="s4">= </span><span class="s1">re</span><span class="s3">.</span><span class="s1">compile</span><span class="s3">(</span><span class="s6">r&quot;\${([A-Za-z][A-Za-z0-9_]*)}&quot;</span><span class="s3">)</span>

    <span class="s2">if </span><span class="s1">vars </span><span class="s2">is None</span><span class="s4">:</span>
        <span class="s1">vars </span><span class="s4">= </span><span class="s5">{}</span>
    <span class="s1">done </span><span class="s4">= </span><span class="s5">{}</span>
    <span class="s1">notdone </span><span class="s4">= </span><span class="s5">{}</span>

    <span class="s2">with </span><span class="s1">codecs</span><span class="s3">.</span><span class="s1">open</span><span class="s3">(</span><span class="s1">filename</span><span class="s3">, </span><span class="s1">encoding</span><span class="s4">=</span><span class="s6">'utf-8'</span><span class="s3">, </span><span class="s1">errors</span><span class="s4">=</span><span class="s6">&quot;surrogateescape&quot;</span><span class="s3">) </span><span class="s2">as </span><span class="s1">f</span><span class="s4">:</span>
        <span class="s1">lines </span><span class="s4">= </span><span class="s1">f</span><span class="s3">.</span><span class="s1">readlines</span><span class="s3">()</span>

    <span class="s2">for </span><span class="s1">line </span><span class="s2">in </span><span class="s1">lines</span><span class="s4">:</span>
        <span class="s2">if </span><span class="s1">line</span><span class="s3">.</span><span class="s1">startswith</span><span class="s3">(</span><span class="s6">'#'</span><span class="s3">) </span><span class="s2">or </span><span class="s1">line</span><span class="s3">.</span><span class="s1">strip</span><span class="s3">() </span><span class="s4">== </span><span class="s6">''</span><span class="s4">:</span>
            <span class="s2">continue</span>
        <span class="s1">m </span><span class="s4">= </span><span class="s1">_variable_rx</span><span class="s3">.</span><span class="s1">match</span><span class="s3">(</span><span class="s1">line</span><span class="s3">)</span>
        <span class="s2">if </span><span class="s1">m</span><span class="s4">:</span>
            <span class="s1">n</span><span class="s3">, </span><span class="s1">v </span><span class="s4">= </span><span class="s1">m</span><span class="s3">.</span><span class="s1">group</span><span class="s3">(</span><span class="s7">1</span><span class="s3">, </span><span class="s7">2</span><span class="s3">)</span>
            <span class="s1">v </span><span class="s4">= </span><span class="s1">v</span><span class="s3">.</span><span class="s1">strip</span><span class="s3">()</span>
            <span class="s0"># `$$' is a literal `$' in make</span>
            <span class="s1">tmpv </span><span class="s4">= </span><span class="s1">v</span><span class="s3">.</span><span class="s1">replace</span><span class="s3">(</span><span class="s6">'$$'</span><span class="s3">, </span><span class="s6">''</span><span class="s3">)</span>

            <span class="s2">if </span><span class="s6">&quot;$&quot; </span><span class="s2">in </span><span class="s1">tmpv</span><span class="s4">:</span>
                <span class="s1">notdone</span><span class="s5">[</span><span class="s1">n</span><span class="s5">] </span><span class="s4">= </span><span class="s1">v</span>
            <span class="s2">else</span><span class="s4">:</span>
                <span class="s2">try</span><span class="s4">:</span>
                    <span class="s1">v </span><span class="s4">= </span><span class="s1">int</span><span class="s3">(</span><span class="s1">v</span><span class="s3">)</span>
                <span class="s2">except </span><span class="s1">ValueError</span><span class="s4">:</span>
                    <span class="s0"># insert literal `$'</span>
                    <span class="s1">done</span><span class="s5">[</span><span class="s1">n</span><span class="s5">] </span><span class="s4">= </span><span class="s1">v</span><span class="s3">.</span><span class="s1">replace</span><span class="s3">(</span><span class="s6">'$$'</span><span class="s3">, </span><span class="s6">'$'</span><span class="s3">)</span>
                <span class="s2">else</span><span class="s4">:</span>
                    <span class="s1">done</span><span class="s5">[</span><span class="s1">n</span><span class="s5">] </span><span class="s4">= </span><span class="s1">v</span>

    <span class="s0"># do variable interpolation here</span>
    <span class="s1">variables </span><span class="s4">= </span><span class="s1">list</span><span class="s3">(</span><span class="s1">notdone</span><span class="s3">.</span><span class="s1">keys</span><span class="s3">())</span>

    <span class="s0"># Variables with a 'PY_' prefix in the makefile. These need to</span>
    <span class="s0"># be made available without that prefix through sysconfig.</span>
    <span class="s0"># Special care is needed to ensure that variable expansion works, even</span>
    <span class="s0"># if the expansion uses the name without a prefix.</span>
    <span class="s1">renamed_variables </span><span class="s4">= </span><span class="s3">(</span><span class="s6">'CFLAGS'</span><span class="s3">, </span><span class="s6">'LDFLAGS'</span><span class="s3">, </span><span class="s6">'CPPFLAGS'</span><span class="s3">)</span>

    <span class="s2">while </span><span class="s1">len</span><span class="s3">(</span><span class="s1">variables</span><span class="s3">) </span><span class="s4">&gt; </span><span class="s7">0</span><span class="s4">:</span>
        <span class="s2">for </span><span class="s1">name </span><span class="s2">in </span><span class="s1">tuple</span><span class="s3">(</span><span class="s1">variables</span><span class="s3">)</span><span class="s4">:</span>
            <span class="s1">value </span><span class="s4">= </span><span class="s1">notdone</span><span class="s5">[</span><span class="s1">name</span><span class="s5">]</span>
            <span class="s1">m </span><span class="s4">= </span><span class="s1">_findvar1_rx</span><span class="s3">.</span><span class="s1">search</span><span class="s3">(</span><span class="s1">value</span><span class="s3">) </span><span class="s2">or </span><span class="s1">_findvar2_rx</span><span class="s3">.</span><span class="s1">search</span><span class="s3">(</span><span class="s1">value</span><span class="s3">)</span>
            <span class="s2">if </span><span class="s1">m </span><span class="s2">is not None</span><span class="s4">:</span>
                <span class="s1">n </span><span class="s4">= </span><span class="s1">m</span><span class="s3">.</span><span class="s1">group</span><span class="s3">(</span><span class="s7">1</span><span class="s3">)</span>
                <span class="s1">found </span><span class="s4">= </span><span class="s2">True</span>
                <span class="s2">if </span><span class="s1">n </span><span class="s2">in </span><span class="s1">done</span><span class="s4">:</span>
                    <span class="s1">item </span><span class="s4">= </span><span class="s1">str</span><span class="s3">(</span><span class="s1">done</span><span class="s5">[</span><span class="s1">n</span><span class="s5">]</span><span class="s3">)</span>
                <span class="s2">elif </span><span class="s1">n </span><span class="s2">in </span><span class="s1">notdone</span><span class="s4">:</span>
                    <span class="s0"># get it on a subsequent round</span>
                    <span class="s1">found </span><span class="s4">= </span><span class="s2">False</span>
                <span class="s2">elif </span><span class="s1">n </span><span class="s2">in </span><span class="s1">os</span><span class="s3">.</span><span class="s1">environ</span><span class="s4">:</span>
                    <span class="s0"># do it like make: fall back to environment</span>
                    <span class="s1">item </span><span class="s4">= </span><span class="s1">os</span><span class="s3">.</span><span class="s1">environ</span><span class="s5">[</span><span class="s1">n</span><span class="s5">]</span>

                <span class="s2">elif </span><span class="s1">n </span><span class="s2">in </span><span class="s1">renamed_variables</span><span class="s4">:</span>
                    <span class="s2">if </span><span class="s3">(</span><span class="s1">name</span><span class="s3">.</span><span class="s1">startswith</span><span class="s3">(</span><span class="s6">'PY_'</span><span class="s3">) </span><span class="s2">and</span>
                        <span class="s1">name</span><span class="s5">[</span><span class="s7">3</span><span class="s4">:</span><span class="s5">] </span><span class="s2">in </span><span class="s1">renamed_variables</span><span class="s3">)</span><span class="s4">:</span>
                        <span class="s1">item </span><span class="s4">= </span><span class="s6">&quot;&quot;</span>

                    <span class="s2">elif </span><span class="s6">'PY_' </span><span class="s4">+ </span><span class="s1">n </span><span class="s2">in </span><span class="s1">notdone</span><span class="s4">:</span>
                        <span class="s1">found </span><span class="s4">= </span><span class="s2">False</span>

                    <span class="s2">else</span><span class="s4">:</span>
                        <span class="s1">item </span><span class="s4">= </span><span class="s1">str</span><span class="s3">(</span><span class="s1">done</span><span class="s5">[</span><span class="s6">'PY_' </span><span class="s4">+ </span><span class="s1">n</span><span class="s5">]</span><span class="s3">)</span>

                <span class="s2">else</span><span class="s4">:</span>
                    <span class="s1">done</span><span class="s5">[</span><span class="s1">n</span><span class="s5">] </span><span class="s4">= </span><span class="s1">item </span><span class="s4">= </span><span class="s6">&quot;&quot;</span>

                <span class="s2">if </span><span class="s1">found</span><span class="s4">:</span>
                    <span class="s1">after </span><span class="s4">= </span><span class="s1">value</span><span class="s5">[</span><span class="s1">m</span><span class="s3">.</span><span class="s1">end</span><span class="s3">()</span><span class="s4">:</span><span class="s5">]</span>
                    <span class="s1">value </span><span class="s4">= </span><span class="s1">value</span><span class="s5">[</span><span class="s4">:</span><span class="s1">m</span><span class="s3">.</span><span class="s1">start</span><span class="s3">()</span><span class="s5">] </span><span class="s4">+ </span><span class="s1">item </span><span class="s4">+ </span><span class="s1">after</span>
                    <span class="s2">if </span><span class="s6">&quot;$&quot; </span><span class="s2">in </span><span class="s1">after</span><span class="s4">:</span>
                        <span class="s1">notdone</span><span class="s5">[</span><span class="s1">name</span><span class="s5">] </span><span class="s4">= </span><span class="s1">value</span>
                    <span class="s2">else</span><span class="s4">:</span>
                        <span class="s2">try</span><span class="s4">:</span>
                            <span class="s1">value </span><span class="s4">= </span><span class="s1">int</span><span class="s3">(</span><span class="s1">value</span><span class="s3">)</span>
                        <span class="s2">except </span><span class="s1">ValueError</span><span class="s4">:</span>
                            <span class="s1">done</span><span class="s5">[</span><span class="s1">name</span><span class="s5">] </span><span class="s4">= </span><span class="s1">value</span><span class="s3">.</span><span class="s1">strip</span><span class="s3">()</span>
                        <span class="s2">else</span><span class="s4">:</span>
                            <span class="s1">done</span><span class="s5">[</span><span class="s1">name</span><span class="s5">] </span><span class="s4">= </span><span class="s1">value</span>
                        <span class="s1">variables</span><span class="s3">.</span><span class="s1">remove</span><span class="s3">(</span><span class="s1">name</span><span class="s3">)</span>

                        <span class="s2">if </span><span class="s3">(</span><span class="s1">name</span><span class="s3">.</span><span class="s1">startswith</span><span class="s3">(</span><span class="s6">'PY_'</span><span class="s3">) </span><span class="s2">and</span>
                            <span class="s1">name</span><span class="s5">[</span><span class="s7">3</span><span class="s4">:</span><span class="s5">] </span><span class="s2">in </span><span class="s1">renamed_variables</span><span class="s3">)</span><span class="s4">:</span>

                            <span class="s1">name </span><span class="s4">= </span><span class="s1">name</span><span class="s5">[</span><span class="s7">3</span><span class="s4">:</span><span class="s5">]</span>
                            <span class="s2">if </span><span class="s1">name </span><span class="s2">not in </span><span class="s1">done</span><span class="s4">:</span>
                                <span class="s1">done</span><span class="s5">[</span><span class="s1">name</span><span class="s5">] </span><span class="s4">= </span><span class="s1">value</span>

            <span class="s2">else</span><span class="s4">:</span>
                <span class="s0"># bogus variable reference (e.g. &quot;prefix=$/opt/python&quot;);</span>
                <span class="s0"># just drop it since we can't deal</span>
                <span class="s1">done</span><span class="s5">[</span><span class="s1">name</span><span class="s5">] </span><span class="s4">= </span><span class="s1">value</span>
                <span class="s1">variables</span><span class="s3">.</span><span class="s1">remove</span><span class="s3">(</span><span class="s1">name</span><span class="s3">)</span>

    <span class="s0"># strip spurious spaces</span>
    <span class="s2">for </span><span class="s1">k</span><span class="s3">, </span><span class="s1">v </span><span class="s2">in </span><span class="s1">done</span><span class="s3">.</span><span class="s1">items</span><span class="s3">()</span><span class="s4">:</span>
        <span class="s2">if </span><span class="s1">isinstance</span><span class="s3">(</span><span class="s1">v</span><span class="s3">, </span><span class="s1">str</span><span class="s3">)</span><span class="s4">:</span>
            <span class="s1">done</span><span class="s5">[</span><span class="s1">k</span><span class="s5">] </span><span class="s4">= </span><span class="s1">v</span><span class="s3">.</span><span class="s1">strip</span><span class="s3">()</span>

    <span class="s0"># save the results in the global dictionary</span>
    <span class="s1">vars</span><span class="s3">.</span><span class="s1">update</span><span class="s3">(</span><span class="s1">done</span><span class="s3">)</span>
    <span class="s2">return </span><span class="s1">vars</span>


<span class="s2">def </span><span class="s1">get_makefile_filename</span><span class="s3">()</span><span class="s4">:</span>
    <span class="s0">&quot;&quot;&quot;Return the path of the Makefile.&quot;&quot;&quot;</span>
    <span class="s2">if </span><span class="s1">_PYTHON_BUILD</span><span class="s4">:</span>
        <span class="s2">return </span><span class="s1">os</span><span class="s3">.</span><span class="s1">path</span><span class="s3">.</span><span class="s1">join</span><span class="s3">(</span><span class="s1">_PROJECT_BASE</span><span class="s3">, </span><span class="s6">&quot;Makefile&quot;</span><span class="s3">)</span>
    <span class="s2">if </span><span class="s1">hasattr</span><span class="s3">(</span><span class="s1">sys</span><span class="s3">, </span><span class="s6">'abiflags'</span><span class="s3">)</span><span class="s4">:</span>
        <span class="s1">config_dir_name </span><span class="s4">= </span><span class="s6">'config-%s%s' </span><span class="s4">% </span><span class="s3">(</span><span class="s1">_PY_VERSION_SHORT</span><span class="s3">, </span><span class="s1">sys</span><span class="s3">.</span><span class="s1">abiflags</span><span class="s3">)</span>
    <span class="s2">else</span><span class="s4">:</span>
        <span class="s1">config_dir_name </span><span class="s4">= </span><span class="s6">'config'</span>
    <span class="s2">return </span><span class="s1">os</span><span class="s3">.</span><span class="s1">path</span><span class="s3">.</span><span class="s1">join</span><span class="s3">(</span><span class="s1">get_path</span><span class="s3">(</span><span class="s6">'stdlib'</span><span class="s3">), </span><span class="s1">config_dir_name</span><span class="s3">, </span><span class="s6">'Makefile'</span><span class="s3">)</span>


<span class="s2">def </span><span class="s1">_init_posix</span><span class="s3">(</span><span class="s1">vars</span><span class="s3">)</span><span class="s4">:</span>
    <span class="s0">&quot;&quot;&quot;Initialize the module as appropriate for POSIX systems.&quot;&quot;&quot;</span>
    <span class="s0"># load the installed Makefile:</span>
    <span class="s1">makefile </span><span class="s4">= </span><span class="s1">get_makefile_filename</span><span class="s3">()</span>
    <span class="s2">try</span><span class="s4">:</span>
        <span class="s1">_parse_makefile</span><span class="s3">(</span><span class="s1">makefile</span><span class="s3">, </span><span class="s1">vars</span><span class="s3">)</span>
    <span class="s2">except </span><span class="s1">IOError </span><span class="s2">as </span><span class="s1">e</span><span class="s4">:</span>
        <span class="s1">msg </span><span class="s4">= </span><span class="s6">&quot;invalid Python installation: unable to open %s&quot; </span><span class="s4">% </span><span class="s1">makefile</span>
        <span class="s2">if </span><span class="s1">hasattr</span><span class="s3">(</span><span class="s1">e</span><span class="s3">, </span><span class="s6">&quot;strerror&quot;</span><span class="s3">)</span><span class="s4">:</span>
            <span class="s1">msg </span><span class="s4">= </span><span class="s1">msg </span><span class="s4">+ </span><span class="s6">&quot; (%s)&quot; </span><span class="s4">% </span><span class="s1">e</span><span class="s3">.</span><span class="s1">strerror</span>
        <span class="s2">raise </span><span class="s1">IOError</span><span class="s3">(</span><span class="s1">msg</span><span class="s3">)</span>
    <span class="s0"># load the installed pyconfig.h:</span>
    <span class="s1">config_h </span><span class="s4">= </span><span class="s1">get_config_h_filename</span><span class="s3">()</span>
    <span class="s2">try</span><span class="s4">:</span>
        <span class="s2">with </span><span class="s1">open</span><span class="s3">(</span><span class="s1">config_h</span><span class="s3">) </span><span class="s2">as </span><span class="s1">f</span><span class="s4">:</span>
            <span class="s1">parse_config_h</span><span class="s3">(</span><span class="s1">f</span><span class="s3">, </span><span class="s1">vars</span><span class="s3">)</span>
    <span class="s2">except </span><span class="s1">IOError </span><span class="s2">as </span><span class="s1">e</span><span class="s4">:</span>
        <span class="s1">msg </span><span class="s4">= </span><span class="s6">&quot;invalid Python installation: unable to open %s&quot; </span><span class="s4">% </span><span class="s1">config_h</span>
        <span class="s2">if </span><span class="s1">hasattr</span><span class="s3">(</span><span class="s1">e</span><span class="s3">, </span><span class="s6">&quot;strerror&quot;</span><span class="s3">)</span><span class="s4">:</span>
            <span class="s1">msg </span><span class="s4">= </span><span class="s1">msg </span><span class="s4">+ </span><span class="s6">&quot; (%s)&quot; </span><span class="s4">% </span><span class="s1">e</span><span class="s3">.</span><span class="s1">strerror</span>
        <span class="s2">raise </span><span class="s1">IOError</span><span class="s3">(</span><span class="s1">msg</span><span class="s3">)</span>
    <span class="s0"># On AIX, there are wrong paths to the linker scripts in the Makefile</span>
    <span class="s0"># -- these paths are relative to the Python source, but when installed</span>
    <span class="s0"># the scripts are in another directory.</span>
    <span class="s2">if </span><span class="s1">_PYTHON_BUILD</span><span class="s4">:</span>
        <span class="s1">vars</span><span class="s5">[</span><span class="s6">'LDSHARED'</span><span class="s5">] </span><span class="s4">= </span><span class="s1">vars</span><span class="s5">[</span><span class="s6">'BLDSHARED'</span><span class="s5">]</span>


<span class="s2">def </span><span class="s1">_init_non_posix</span><span class="s3">(</span><span class="s1">vars</span><span class="s3">)</span><span class="s4">:</span>
    <span class="s0">&quot;&quot;&quot;Initialize the module as appropriate for NT&quot;&quot;&quot;</span>
    <span class="s0"># set basic install directories</span>
    <span class="s1">vars</span><span class="s5">[</span><span class="s6">'LIBDEST'</span><span class="s5">] </span><span class="s4">= </span><span class="s1">get_path</span><span class="s3">(</span><span class="s6">'stdlib'</span><span class="s3">)</span>
    <span class="s1">vars</span><span class="s5">[</span><span class="s6">'BINLIBDEST'</span><span class="s5">] </span><span class="s4">= </span><span class="s1">get_path</span><span class="s3">(</span><span class="s6">'platstdlib'</span><span class="s3">)</span>
    <span class="s1">vars</span><span class="s5">[</span><span class="s6">'INCLUDEPY'</span><span class="s5">] </span><span class="s4">= </span><span class="s1">get_path</span><span class="s3">(</span><span class="s6">'include'</span><span class="s3">)</span>
    <span class="s1">vars</span><span class="s5">[</span><span class="s6">'SO'</span><span class="s5">] </span><span class="s4">= </span><span class="s6">'.pyd'</span>
    <span class="s1">vars</span><span class="s5">[</span><span class="s6">'EXE'</span><span class="s5">] </span><span class="s4">= </span><span class="s6">'.exe'</span>
    <span class="s1">vars</span><span class="s5">[</span><span class="s6">'VERSION'</span><span class="s5">] </span><span class="s4">= </span><span class="s1">_PY_VERSION_SHORT_NO_DOT</span>
    <span class="s1">vars</span><span class="s5">[</span><span class="s6">'BINDIR'</span><span class="s5">] </span><span class="s4">= </span><span class="s1">os</span><span class="s3">.</span><span class="s1">path</span><span class="s3">.</span><span class="s1">dirname</span><span class="s3">(</span><span class="s1">_safe_realpath</span><span class="s3">(</span><span class="s1">sys</span><span class="s3">.</span><span class="s1">executable</span><span class="s3">))</span>

<span class="s0">#</span>
<span class="s0"># public APIs</span>
<span class="s0">#</span>


<span class="s2">def </span><span class="s1">parse_config_h</span><span class="s3">(</span><span class="s1">fp</span><span class="s3">, </span><span class="s1">vars</span><span class="s4">=</span><span class="s2">None</span><span class="s3">)</span><span class="s4">:</span>
    <span class="s0">&quot;&quot;&quot;Parse a config.h-style file. 
 
    A dictionary containing name/value pairs is returned.  If an 
    optional dictionary is passed in as the second argument, it is 
    used instead of a new dictionary. 
    &quot;&quot;&quot;</span>
    <span class="s2">if </span><span class="s1">vars </span><span class="s2">is None</span><span class="s4">:</span>
        <span class="s1">vars </span><span class="s4">= </span><span class="s5">{}</span>
    <span class="s1">define_rx </span><span class="s4">= </span><span class="s1">re</span><span class="s3">.</span><span class="s1">compile</span><span class="s3">(</span><span class="s6">&quot;#define ([A-Z][A-Za-z0-9_]+) (.*)\n&quot;</span><span class="s3">)</span>
    <span class="s1">undef_rx </span><span class="s4">= </span><span class="s1">re</span><span class="s3">.</span><span class="s1">compile</span><span class="s3">(</span><span class="s6">&quot;/[*] #undef ([A-Z][A-Za-z0-9_]+) [*]/\n&quot;</span><span class="s3">)</span>

    <span class="s2">while True</span><span class="s4">:</span>
        <span class="s1">line </span><span class="s4">= </span><span class="s1">fp</span><span class="s3">.</span><span class="s1">readline</span><span class="s3">()</span>
        <span class="s2">if not </span><span class="s1">line</span><span class="s4">:</span>
            <span class="s2">break</span>
        <span class="s1">m </span><span class="s4">= </span><span class="s1">define_rx</span><span class="s3">.</span><span class="s1">match</span><span class="s3">(</span><span class="s1">line</span><span class="s3">)</span>
        <span class="s2">if </span><span class="s1">m</span><span class="s4">:</span>
            <span class="s1">n</span><span class="s3">, </span><span class="s1">v </span><span class="s4">= </span><span class="s1">m</span><span class="s3">.</span><span class="s1">group</span><span class="s3">(</span><span class="s7">1</span><span class="s3">, </span><span class="s7">2</span><span class="s3">)</span>
            <span class="s2">try</span><span class="s4">:</span>
                <span class="s1">v </span><span class="s4">= </span><span class="s1">int</span><span class="s3">(</span><span class="s1">v</span><span class="s3">)</span>
            <span class="s2">except </span><span class="s1">ValueError</span><span class="s4">:</span>
                <span class="s2">pass</span>
            <span class="s1">vars</span><span class="s5">[</span><span class="s1">n</span><span class="s5">] </span><span class="s4">= </span><span class="s1">v</span>
        <span class="s2">else</span><span class="s4">:</span>
            <span class="s1">m </span><span class="s4">= </span><span class="s1">undef_rx</span><span class="s3">.</span><span class="s1">match</span><span class="s3">(</span><span class="s1">line</span><span class="s3">)</span>
            <span class="s2">if </span><span class="s1">m</span><span class="s4">:</span>
                <span class="s1">vars</span><span class="s5">[</span><span class="s1">m</span><span class="s3">.</span><span class="s1">group</span><span class="s3">(</span><span class="s7">1</span><span class="s3">)</span><span class="s5">] </span><span class="s4">= </span><span class="s7">0</span>
    <span class="s2">return </span><span class="s1">vars</span>


<span class="s2">def </span><span class="s1">get_config_h_filename</span><span class="s3">()</span><span class="s4">:</span>
    <span class="s0">&quot;&quot;&quot;Return the path of pyconfig.h.&quot;&quot;&quot;</span>
    <span class="s2">if </span><span class="s1">_PYTHON_BUILD</span><span class="s4">:</span>
        <span class="s2">if </span><span class="s1">os</span><span class="s3">.</span><span class="s1">name </span><span class="s4">== </span><span class="s6">&quot;nt&quot;</span><span class="s4">:</span>
            <span class="s1">inc_dir </span><span class="s4">= </span><span class="s1">os</span><span class="s3">.</span><span class="s1">path</span><span class="s3">.</span><span class="s1">join</span><span class="s3">(</span><span class="s1">_PROJECT_BASE</span><span class="s3">, </span><span class="s6">&quot;PC&quot;</span><span class="s3">)</span>
        <span class="s2">else</span><span class="s4">:</span>
            <span class="s1">inc_dir </span><span class="s4">= </span><span class="s1">_PROJECT_BASE</span>
    <span class="s2">else</span><span class="s4">:</span>
        <span class="s1">inc_dir </span><span class="s4">= </span><span class="s1">get_path</span><span class="s3">(</span><span class="s6">'platinclude'</span><span class="s3">)</span>
    <span class="s2">return </span><span class="s1">os</span><span class="s3">.</span><span class="s1">path</span><span class="s3">.</span><span class="s1">join</span><span class="s3">(</span><span class="s1">inc_dir</span><span class="s3">, </span><span class="s6">'pyconfig.h'</span><span class="s3">)</span>


<span class="s2">def </span><span class="s1">get_scheme_names</span><span class="s3">()</span><span class="s4">:</span>
    <span class="s0">&quot;&quot;&quot;Return a tuple containing the schemes names.&quot;&quot;&quot;</span>
    <span class="s2">return </span><span class="s1">tuple</span><span class="s3">(</span><span class="s1">sorted</span><span class="s3">(</span><span class="s1">_SCHEMES</span><span class="s3">.</span><span class="s1">sections</span><span class="s3">()))</span>


<span class="s2">def </span><span class="s1">get_path_names</span><span class="s3">()</span><span class="s4">:</span>
    <span class="s0">&quot;&quot;&quot;Return a tuple containing the paths names.&quot;&quot;&quot;</span>
    <span class="s0"># xxx see if we want a static list</span>
    <span class="s2">return </span><span class="s1">_SCHEMES</span><span class="s3">.</span><span class="s1">options</span><span class="s3">(</span><span class="s6">'posix_prefix'</span><span class="s3">)</span>


<span class="s2">def </span><span class="s1">get_paths</span><span class="s3">(</span><span class="s1">scheme</span><span class="s4">=</span><span class="s1">_get_default_scheme</span><span class="s3">(), </span><span class="s1">vars</span><span class="s4">=</span><span class="s2">None</span><span class="s3">, </span><span class="s1">expand</span><span class="s4">=</span><span class="s2">True</span><span class="s3">)</span><span class="s4">:</span>
    <span class="s0">&quot;&quot;&quot;Return a mapping containing an install scheme. 
 
    ``scheme`` is the install scheme name. If not provided, it will 
    return the default scheme for the current platform. 
    &quot;&quot;&quot;</span>
    <span class="s1">_ensure_cfg_read</span><span class="s3">()</span>
    <span class="s2">if </span><span class="s1">expand</span><span class="s4">:</span>
        <span class="s2">return </span><span class="s1">_expand_vars</span><span class="s3">(</span><span class="s1">scheme</span><span class="s3">, </span><span class="s1">vars</span><span class="s3">)</span>
    <span class="s2">else</span><span class="s4">:</span>
        <span class="s2">return </span><span class="s1">dict</span><span class="s3">(</span><span class="s1">_SCHEMES</span><span class="s3">.</span><span class="s1">items</span><span class="s3">(</span><span class="s1">scheme</span><span class="s3">))</span>


<span class="s2">def </span><span class="s1">get_path</span><span class="s3">(</span><span class="s1">name</span><span class="s3">, </span><span class="s1">scheme</span><span class="s4">=</span><span class="s1">_get_default_scheme</span><span class="s3">(), </span><span class="s1">vars</span><span class="s4">=</span><span class="s2">None</span><span class="s3">, </span><span class="s1">expand</span><span class="s4">=</span><span class="s2">True</span><span class="s3">)</span><span class="s4">:</span>
    <span class="s0">&quot;&quot;&quot;Return a path corresponding to the scheme. 
 
    ``scheme`` is the install scheme name. 
    &quot;&quot;&quot;</span>
    <span class="s2">return </span><span class="s1">get_paths</span><span class="s3">(</span><span class="s1">scheme</span><span class="s3">, </span><span class="s1">vars</span><span class="s3">, </span><span class="s1">expand</span><span class="s3">)</span><span class="s5">[</span><span class="s1">name</span><span class="s5">]</span>


<span class="s2">def </span><span class="s1">get_config_vars</span><span class="s3">(</span><span class="s4">*</span><span class="s1">args</span><span class="s3">)</span><span class="s4">:</span>
    <span class="s0">&quot;&quot;&quot;With no arguments, return a dictionary of all configuration 
    variables relevant for the current platform. 
 
    On Unix, this means every variable defined in Python's installed Makefile; 
    On Windows and Mac OS it's a much smaller set. 
 
    With arguments, return a list of values that result from looking up 
    each argument in the configuration variable dictionary. 
    &quot;&quot;&quot;</span>
    <span class="s2">global </span><span class="s1">_CONFIG_VARS</span>
    <span class="s2">if </span><span class="s1">_CONFIG_VARS </span><span class="s2">is None</span><span class="s4">:</span>
        <span class="s1">_CONFIG_VARS </span><span class="s4">= </span><span class="s5">{}</span>
        <span class="s0"># Normalized versions of prefix and exec_prefix are handy to have;</span>
        <span class="s0"># in fact, these are the standard versions used most places in the</span>
        <span class="s0"># distutils2 module.</span>
        <span class="s1">_CONFIG_VARS</span><span class="s5">[</span><span class="s6">'prefix'</span><span class="s5">] </span><span class="s4">= </span><span class="s1">_PREFIX</span>
        <span class="s1">_CONFIG_VARS</span><span class="s5">[</span><span class="s6">'exec_prefix'</span><span class="s5">] </span><span class="s4">= </span><span class="s1">_EXEC_PREFIX</span>
        <span class="s1">_CONFIG_VARS</span><span class="s5">[</span><span class="s6">'py_version'</span><span class="s5">] </span><span class="s4">= </span><span class="s1">_PY_VERSION</span>
        <span class="s1">_CONFIG_VARS</span><span class="s5">[</span><span class="s6">'py_version_short'</span><span class="s5">] </span><span class="s4">= </span><span class="s1">_PY_VERSION_SHORT</span>
        <span class="s1">_CONFIG_VARS</span><span class="s5">[</span><span class="s6">'py_version_nodot'</span><span class="s5">] </span><span class="s4">= </span><span class="s1">_PY_VERSION</span><span class="s5">[</span><span class="s7">0</span><span class="s5">] </span><span class="s4">+ </span><span class="s1">_PY_VERSION</span><span class="s5">[</span><span class="s7">2</span><span class="s5">]</span>
        <span class="s1">_CONFIG_VARS</span><span class="s5">[</span><span class="s6">'base'</span><span class="s5">] </span><span class="s4">= </span><span class="s1">_PREFIX</span>
        <span class="s1">_CONFIG_VARS</span><span class="s5">[</span><span class="s6">'platbase'</span><span class="s5">] </span><span class="s4">= </span><span class="s1">_EXEC_PREFIX</span>
        <span class="s1">_CONFIG_VARS</span><span class="s5">[</span><span class="s6">'projectbase'</span><span class="s5">] </span><span class="s4">= </span><span class="s1">_PROJECT_BASE</span>
        <span class="s2">try</span><span class="s4">:</span>
            <span class="s1">_CONFIG_VARS</span><span class="s5">[</span><span class="s6">'abiflags'</span><span class="s5">] </span><span class="s4">= </span><span class="s1">sys</span><span class="s3">.</span><span class="s1">abiflags</span>
        <span class="s2">except </span><span class="s1">AttributeError</span><span class="s4">:</span>
            <span class="s0"># sys.abiflags may not be defined on all platforms.</span>
            <span class="s1">_CONFIG_VARS</span><span class="s5">[</span><span class="s6">'abiflags'</span><span class="s5">] </span><span class="s4">= </span><span class="s6">''</span>

        <span class="s2">if </span><span class="s1">os</span><span class="s3">.</span><span class="s1">name </span><span class="s2">in </span><span class="s3">(</span><span class="s6">'nt'</span><span class="s3">, </span><span class="s6">'os2'</span><span class="s3">)</span><span class="s4">:</span>
            <span class="s1">_init_non_posix</span><span class="s3">(</span><span class="s1">_CONFIG_VARS</span><span class="s3">)</span>
        <span class="s2">if </span><span class="s1">os</span><span class="s3">.</span><span class="s1">name </span><span class="s4">== </span><span class="s6">'posix'</span><span class="s4">:</span>
            <span class="s1">_init_posix</span><span class="s3">(</span><span class="s1">_CONFIG_VARS</span><span class="s3">)</span>
        <span class="s0"># Setting 'userbase' is done below the call to the</span>
        <span class="s0"># init function to enable using 'get_config_var' in</span>
        <span class="s0"># the init-function.</span>
        <span class="s2">if </span><span class="s1">sys</span><span class="s3">.</span><span class="s1">version </span><span class="s4">&gt;= </span><span class="s6">'2.6'</span><span class="s4">:</span>
            <span class="s1">_CONFIG_VARS</span><span class="s5">[</span><span class="s6">'userbase'</span><span class="s5">] </span><span class="s4">= </span><span class="s1">_getuserbase</span><span class="s3">()</span>

        <span class="s2">if </span><span class="s6">'srcdir' </span><span class="s2">not in </span><span class="s1">_CONFIG_VARS</span><span class="s4">:</span>
            <span class="s1">_CONFIG_VARS</span><span class="s5">[</span><span class="s6">'srcdir'</span><span class="s5">] </span><span class="s4">= </span><span class="s1">_PROJECT_BASE</span>
        <span class="s2">else</span><span class="s4">:</span>
            <span class="s1">_CONFIG_VARS</span><span class="s5">[</span><span class="s6">'srcdir'</span><span class="s5">] </span><span class="s4">= </span><span class="s1">_safe_realpath</span><span class="s3">(</span><span class="s1">_CONFIG_VARS</span><span class="s5">[</span><span class="s6">'srcdir'</span><span class="s5">]</span><span class="s3">)</span>

        <span class="s0"># Convert srcdir into an absolute path if it appears necessary.</span>
        <span class="s0"># Normally it is relative to the build directory.  However, during</span>
        <span class="s0"># testing, for example, we might be running a non-installed python</span>
        <span class="s0"># from a different directory.</span>
        <span class="s2">if </span><span class="s1">_PYTHON_BUILD </span><span class="s2">and </span><span class="s1">os</span><span class="s3">.</span><span class="s1">name </span><span class="s4">== </span><span class="s6">&quot;posix&quot;</span><span class="s4">:</span>
            <span class="s1">base </span><span class="s4">= </span><span class="s1">_PROJECT_BASE</span>
            <span class="s2">try</span><span class="s4">:</span>
                <span class="s1">cwd </span><span class="s4">= </span><span class="s1">os</span><span class="s3">.</span><span class="s1">getcwd</span><span class="s3">()</span>
            <span class="s2">except </span><span class="s1">OSError</span><span class="s4">:</span>
                <span class="s1">cwd </span><span class="s4">= </span><span class="s2">None</span>
            <span class="s2">if </span><span class="s3">(</span><span class="s2">not </span><span class="s1">os</span><span class="s3">.</span><span class="s1">path</span><span class="s3">.</span><span class="s1">isabs</span><span class="s3">(</span><span class="s1">_CONFIG_VARS</span><span class="s5">[</span><span class="s6">'srcdir'</span><span class="s5">]</span><span class="s3">) </span><span class="s2">and</span>
                <span class="s1">base </span><span class="s4">!= </span><span class="s1">cwd</span><span class="s3">)</span><span class="s4">:</span>
                <span class="s0"># srcdir is relative and we are not in the same directory</span>
                <span class="s0"># as the executable. Assume executable is in the build</span>
                <span class="s0"># directory and make srcdir absolute.</span>
                <span class="s1">srcdir </span><span class="s4">= </span><span class="s1">os</span><span class="s3">.</span><span class="s1">path</span><span class="s3">.</span><span class="s1">join</span><span class="s3">(</span><span class="s1">base</span><span class="s3">, </span><span class="s1">_CONFIG_VARS</span><span class="s5">[</span><span class="s6">'srcdir'</span><span class="s5">]</span><span class="s3">)</span>
                <span class="s1">_CONFIG_VARS</span><span class="s5">[</span><span class="s6">'srcdir'</span><span class="s5">] </span><span class="s4">= </span><span class="s1">os</span><span class="s3">.</span><span class="s1">path</span><span class="s3">.</span><span class="s1">normpath</span><span class="s3">(</span><span class="s1">srcdir</span><span class="s3">)</span>

        <span class="s2">if </span><span class="s1">sys</span><span class="s3">.</span><span class="s1">platform </span><span class="s4">== </span><span class="s6">'darwin'</span><span class="s4">:</span>
            <span class="s1">kernel_version </span><span class="s4">= </span><span class="s1">os</span><span class="s3">.</span><span class="s1">uname</span><span class="s3">()</span><span class="s5">[</span><span class="s7">2</span><span class="s5">]  </span><span class="s0"># Kernel version (8.4.3)</span>
            <span class="s1">major_version </span><span class="s4">= </span><span class="s1">int</span><span class="s3">(</span><span class="s1">kernel_version</span><span class="s3">.</span><span class="s1">split</span><span class="s3">(</span><span class="s6">'.'</span><span class="s3">)</span><span class="s5">[</span><span class="s7">0</span><span class="s5">]</span><span class="s3">)</span>

            <span class="s2">if </span><span class="s1">major_version </span><span class="s4">&lt; </span><span class="s7">8</span><span class="s4">:</span>
                <span class="s0"># On Mac OS X before 10.4, check if -arch and -isysroot</span>
                <span class="s0"># are in CFLAGS or LDFLAGS and remove them if they are.</span>
                <span class="s0"># This is needed when building extensions on a 10.3 system</span>
                <span class="s0"># using a universal build of python.</span>
                <span class="s2">for </span><span class="s1">key </span><span class="s2">in </span><span class="s3">(</span><span class="s6">'LDFLAGS'</span><span class="s3">, </span><span class="s6">'BASECFLAGS'</span><span class="s3">,</span>
                        <span class="s0"># a number of derived variables. These need to be</span>
                        <span class="s0"># patched up as well.</span>
                        <span class="s6">'CFLAGS'</span><span class="s3">, </span><span class="s6">'PY_CFLAGS'</span><span class="s3">, </span><span class="s6">'BLDSHARED'</span><span class="s3">)</span><span class="s4">:</span>
                    <span class="s1">flags </span><span class="s4">= </span><span class="s1">_CONFIG_VARS</span><span class="s5">[</span><span class="s1">key</span><span class="s5">]</span>
                    <span class="s1">flags </span><span class="s4">= </span><span class="s1">re</span><span class="s3">.</span><span class="s1">sub</span><span class="s3">(</span><span class="s6">r'-arch\s+\w+\s'</span><span class="s3">, </span><span class="s6">' '</span><span class="s3">, </span><span class="s1">flags</span><span class="s3">)</span>
                    <span class="s1">flags </span><span class="s4">= </span><span class="s1">re</span><span class="s3">.</span><span class="s1">sub</span><span class="s3">(</span><span class="s6">'-isysroot [^ \t]*'</span><span class="s3">, </span><span class="s6">' '</span><span class="s3">, </span><span class="s1">flags</span><span class="s3">)</span>
                    <span class="s1">_CONFIG_VARS</span><span class="s5">[</span><span class="s1">key</span><span class="s5">] </span><span class="s4">= </span><span class="s1">flags</span>
            <span class="s2">else</span><span class="s4">:</span>
                <span class="s0"># Allow the user to override the architecture flags using</span>
                <span class="s0"># an environment variable.</span>
                <span class="s0"># NOTE: This name was introduced by Apple in OSX 10.5 and</span>
                <span class="s0"># is used by several scripting languages distributed with</span>
                <span class="s0"># that OS release.</span>
                <span class="s2">if </span><span class="s6">'ARCHFLAGS' </span><span class="s2">in </span><span class="s1">os</span><span class="s3">.</span><span class="s1">environ</span><span class="s4">:</span>
                    <span class="s1">arch </span><span class="s4">= </span><span class="s1">os</span><span class="s3">.</span><span class="s1">environ</span><span class="s5">[</span><span class="s6">'ARCHFLAGS'</span><span class="s5">]</span>
                    <span class="s2">for </span><span class="s1">key </span><span class="s2">in </span><span class="s3">(</span><span class="s6">'LDFLAGS'</span><span class="s3">, </span><span class="s6">'BASECFLAGS'</span><span class="s3">,</span>
                        <span class="s0"># a number of derived variables. These need to be</span>
                        <span class="s0"># patched up as well.</span>
                        <span class="s6">'CFLAGS'</span><span class="s3">, </span><span class="s6">'PY_CFLAGS'</span><span class="s3">, </span><span class="s6">'BLDSHARED'</span><span class="s3">)</span><span class="s4">:</span>

                        <span class="s1">flags </span><span class="s4">= </span><span class="s1">_CONFIG_VARS</span><span class="s5">[</span><span class="s1">key</span><span class="s5">]</span>
                        <span class="s1">flags </span><span class="s4">= </span><span class="s1">re</span><span class="s3">.</span><span class="s1">sub</span><span class="s3">(</span><span class="s6">r'-arch\s+\w+\s'</span><span class="s3">, </span><span class="s6">' '</span><span class="s3">, </span><span class="s1">flags</span><span class="s3">)</span>
                        <span class="s1">flags </span><span class="s4">= </span><span class="s1">flags </span><span class="s4">+ </span><span class="s6">' ' </span><span class="s4">+ </span><span class="s1">arch</span>
                        <span class="s1">_CONFIG_VARS</span><span class="s5">[</span><span class="s1">key</span><span class="s5">] </span><span class="s4">= </span><span class="s1">flags</span>

                <span class="s0"># If we're on OSX 10.5 or later and the user tries to</span>
                <span class="s0"># compiles an extension using an SDK that is not present</span>
                <span class="s0"># on the current machine it is better to not use an SDK</span>
                <span class="s0"># than to fail.</span>
                <span class="s0">#</span>
                <span class="s0"># The major usecase for this is users using a Python.org</span>
                <span class="s0"># binary installer  on OSX 10.6: that installer uses</span>
                <span class="s0"># the 10.4u SDK, but that SDK is not installed by default</span>
                <span class="s0"># when you install Xcode.</span>
                <span class="s0">#</span>
                <span class="s1">CFLAGS </span><span class="s4">= </span><span class="s1">_CONFIG_VARS</span><span class="s3">.</span><span class="s1">get</span><span class="s3">(</span><span class="s6">'CFLAGS'</span><span class="s3">, </span><span class="s6">''</span><span class="s3">)</span>
                <span class="s1">m </span><span class="s4">= </span><span class="s1">re</span><span class="s3">.</span><span class="s1">search</span><span class="s3">(</span><span class="s6">r'-isysroot\s+(\S+)'</span><span class="s3">, </span><span class="s1">CFLAGS</span><span class="s3">)</span>
                <span class="s2">if </span><span class="s1">m </span><span class="s2">is not None</span><span class="s4">:</span>
                    <span class="s1">sdk </span><span class="s4">= </span><span class="s1">m</span><span class="s3">.</span><span class="s1">group</span><span class="s3">(</span><span class="s7">1</span><span class="s3">)</span>
                    <span class="s2">if not </span><span class="s1">os</span><span class="s3">.</span><span class="s1">path</span><span class="s3">.</span><span class="s1">exists</span><span class="s3">(</span><span class="s1">sdk</span><span class="s3">)</span><span class="s4">:</span>
                        <span class="s2">for </span><span class="s1">key </span><span class="s2">in </span><span class="s3">(</span><span class="s6">'LDFLAGS'</span><span class="s3">, </span><span class="s6">'BASECFLAGS'</span><span class="s3">,</span>
                             <span class="s0"># a number of derived variables. These need to be</span>
                             <span class="s0"># patched up as well.</span>
                            <span class="s6">'CFLAGS'</span><span class="s3">, </span><span class="s6">'PY_CFLAGS'</span><span class="s3">, </span><span class="s6">'BLDSHARED'</span><span class="s3">)</span><span class="s4">:</span>

                            <span class="s1">flags </span><span class="s4">= </span><span class="s1">_CONFIG_VARS</span><span class="s5">[</span><span class="s1">key</span><span class="s5">]</span>
                            <span class="s1">flags </span><span class="s4">= </span><span class="s1">re</span><span class="s3">.</span><span class="s1">sub</span><span class="s3">(</span><span class="s6">r'-isysroot\s+\S+(\s|$)'</span><span class="s3">, </span><span class="s6">' '</span><span class="s3">, </span><span class="s1">flags</span><span class="s3">)</span>
                            <span class="s1">_CONFIG_VARS</span><span class="s5">[</span><span class="s1">key</span><span class="s5">] </span><span class="s4">= </span><span class="s1">flags</span>

    <span class="s2">if </span><span class="s1">args</span><span class="s4">:</span>
        <span class="s1">vals </span><span class="s4">= </span><span class="s5">[]</span>
        <span class="s2">for </span><span class="s1">name </span><span class="s2">in </span><span class="s1">args</span><span class="s4">:</span>
            <span class="s1">vals</span><span class="s3">.</span><span class="s1">append</span><span class="s3">(</span><span class="s1">_CONFIG_VARS</span><span class="s3">.</span><span class="s1">get</span><span class="s3">(</span><span class="s1">name</span><span class="s3">))</span>
        <span class="s2">return </span><span class="s1">vals</span>
    <span class="s2">else</span><span class="s4">:</span>
        <span class="s2">return </span><span class="s1">_CONFIG_VARS</span>


<span class="s2">def </span><span class="s1">get_config_var</span><span class="s3">(</span><span class="s1">name</span><span class="s3">)</span><span class="s4">:</span>
    <span class="s0">&quot;&quot;&quot;Return the value of a single variable using the dictionary returned by 
    'get_config_vars()'. 
 
    Equivalent to get_config_vars().get(name) 
    &quot;&quot;&quot;</span>
    <span class="s2">return </span><span class="s1">get_config_vars</span><span class="s3">().</span><span class="s1">get</span><span class="s3">(</span><span class="s1">name</span><span class="s3">)</span>


<span class="s2">def </span><span class="s1">get_platform</span><span class="s3">()</span><span class="s4">:</span>
    <span class="s0">&quot;&quot;&quot;Return a string that identifies the current platform. 
 
    This is used mainly to distinguish platform-specific build directories and 
    platform-specific built distributions.  Typically includes the OS name 
    and version and the architecture (as supplied by 'os.uname()'), 
    although the exact information included depends on the OS; eg. for IRIX 
    the architecture isn't particularly important (IRIX only runs on SGI 
    hardware), but for Linux the kernel version isn't particularly 
    important. 
 
    Examples of returned values: 
       linux-i586 
       linux-alpha (?) 
       solaris-2.6-sun4u 
       irix-5.3 
       irix64-6.2 
 
    Windows will return one of: 
       win-amd64 (64bit Windows on AMD64 (aka x86_64, Intel64, EM64T, etc) 
       win-ia64 (64bit Windows on Itanium) 
       win32 (all others - specifically, sys.platform is returned) 
 
    For other non-POSIX platforms, currently just returns 'sys.platform'. 
    &quot;&quot;&quot;</span>
    <span class="s2">if </span><span class="s1">os</span><span class="s3">.</span><span class="s1">name </span><span class="s4">== </span><span class="s6">'nt'</span><span class="s4">:</span>
        <span class="s0"># sniff sys.version for architecture.</span>
        <span class="s1">prefix </span><span class="s4">= </span><span class="s6">&quot; bit (&quot;</span>
        <span class="s1">i </span><span class="s4">= </span><span class="s1">sys</span><span class="s3">.</span><span class="s1">version</span><span class="s3">.</span><span class="s1">find</span><span class="s3">(</span><span class="s1">prefix</span><span class="s3">)</span>
        <span class="s2">if </span><span class="s1">i </span><span class="s4">== -</span><span class="s7">1</span><span class="s4">:</span>
            <span class="s2">return </span><span class="s1">sys</span><span class="s3">.</span><span class="s1">platform</span>
        <span class="s1">j </span><span class="s4">= </span><span class="s1">sys</span><span class="s3">.</span><span class="s1">version</span><span class="s3">.</span><span class="s1">find</span><span class="s3">(</span><span class="s6">&quot;)&quot;</span><span class="s3">, </span><span class="s1">i</span><span class="s3">)</span>
        <span class="s1">look </span><span class="s4">= </span><span class="s1">sys</span><span class="s3">.</span><span class="s1">version</span><span class="s5">[</span><span class="s1">i</span><span class="s4">+</span><span class="s1">len</span><span class="s3">(</span><span class="s1">prefix</span><span class="s3">)</span><span class="s4">:</span><span class="s1">j</span><span class="s5">]</span><span class="s3">.</span><span class="s1">lower</span><span class="s3">()</span>
        <span class="s2">if </span><span class="s1">look </span><span class="s4">== </span><span class="s6">'amd64'</span><span class="s4">:</span>
            <span class="s2">return </span><span class="s6">'win-amd64'</span>
        <span class="s2">if </span><span class="s1">look </span><span class="s4">== </span><span class="s6">'itanium'</span><span class="s4">:</span>
            <span class="s2">return </span><span class="s6">'win-ia64'</span>
        <span class="s2">return </span><span class="s1">sys</span><span class="s3">.</span><span class="s1">platform</span>

    <span class="s2">if </span><span class="s1">os</span><span class="s3">.</span><span class="s1">name </span><span class="s4">!= </span><span class="s6">&quot;posix&quot; </span><span class="s2">or not </span><span class="s1">hasattr</span><span class="s3">(</span><span class="s1">os</span><span class="s3">, </span><span class="s6">'uname'</span><span class="s3">)</span><span class="s4">:</span>
        <span class="s0"># XXX what about the architecture? NT is Intel or Alpha,</span>
        <span class="s0"># Mac OS is M68k or PPC, etc.</span>
        <span class="s2">return </span><span class="s1">sys</span><span class="s3">.</span><span class="s1">platform</span>

    <span class="s0"># Try to distinguish various flavours of Unix</span>
    <span class="s1">osname</span><span class="s3">, </span><span class="s1">host</span><span class="s3">, </span><span class="s1">release</span><span class="s3">, </span><span class="s1">version</span><span class="s3">, </span><span class="s1">machine </span><span class="s4">= </span><span class="s1">os</span><span class="s3">.</span><span class="s1">uname</span><span class="s3">()</span>

    <span class="s0"># Convert the OS name to lowercase, remove '/' characters</span>
    <span class="s0"># (to accommodate BSD/OS), and translate spaces (for &quot;Power Macintosh&quot;)</span>
    <span class="s1">osname </span><span class="s4">= </span><span class="s1">osname</span><span class="s3">.</span><span class="s1">lower</span><span class="s3">().</span><span class="s1">replace</span><span class="s3">(</span><span class="s6">'/'</span><span class="s3">, </span><span class="s6">''</span><span class="s3">)</span>
    <span class="s1">machine </span><span class="s4">= </span><span class="s1">machine</span><span class="s3">.</span><span class="s1">replace</span><span class="s3">(</span><span class="s6">' '</span><span class="s3">, </span><span class="s6">'_'</span><span class="s3">)</span>
    <span class="s1">machine </span><span class="s4">= </span><span class="s1">machine</span><span class="s3">.</span><span class="s1">replace</span><span class="s3">(</span><span class="s6">'/'</span><span class="s3">, </span><span class="s6">'-'</span><span class="s3">)</span>

    <span class="s2">if </span><span class="s1">osname</span><span class="s5">[</span><span class="s4">:</span><span class="s7">5</span><span class="s5">] </span><span class="s4">== </span><span class="s6">&quot;linux&quot;</span><span class="s4">:</span>
        <span class="s0"># At least on Linux/Intel, 'machine' is the processor --</span>
        <span class="s0"># i386, etc.</span>
        <span class="s0"># XXX what about Alpha, SPARC, etc?</span>
        <span class="s2">return  </span><span class="s6">&quot;%s-%s&quot; </span><span class="s4">% </span><span class="s3">(</span><span class="s1">osname</span><span class="s3">, </span><span class="s1">machine</span><span class="s3">)</span>
    <span class="s2">elif </span><span class="s1">osname</span><span class="s5">[</span><span class="s4">:</span><span class="s7">5</span><span class="s5">] </span><span class="s4">== </span><span class="s6">&quot;sunos&quot;</span><span class="s4">:</span>
        <span class="s2">if </span><span class="s1">release</span><span class="s5">[</span><span class="s7">0</span><span class="s5">] </span><span class="s4">&gt;= </span><span class="s6">&quot;5&quot;</span><span class="s4">:           </span><span class="s0"># SunOS 5 == Solaris 2</span>
            <span class="s1">osname </span><span class="s4">= </span><span class="s6">&quot;solaris&quot;</span>
            <span class="s1">release </span><span class="s4">= </span><span class="s6">&quot;%d.%s&quot; </span><span class="s4">% </span><span class="s3">(</span><span class="s1">int</span><span class="s3">(</span><span class="s1">release</span><span class="s5">[</span><span class="s7">0</span><span class="s5">]</span><span class="s3">) </span><span class="s4">- </span><span class="s7">3</span><span class="s3">, </span><span class="s1">release</span><span class="s5">[</span><span class="s7">2</span><span class="s4">:</span><span class="s5">]</span><span class="s3">)</span>
        <span class="s0"># fall through to standard osname-release-machine representation</span>
    <span class="s2">elif </span><span class="s1">osname</span><span class="s5">[</span><span class="s4">:</span><span class="s7">4</span><span class="s5">] </span><span class="s4">== </span><span class="s6">&quot;irix&quot;</span><span class="s4">:              </span><span class="s0"># could be &quot;irix64&quot;!</span>
        <span class="s2">return </span><span class="s6">&quot;%s-%s&quot; </span><span class="s4">% </span><span class="s3">(</span><span class="s1">osname</span><span class="s3">, </span><span class="s1">release</span><span class="s3">)</span>
    <span class="s2">elif </span><span class="s1">osname</span><span class="s5">[</span><span class="s4">:</span><span class="s7">3</span><span class="s5">] </span><span class="s4">== </span><span class="s6">&quot;aix&quot;</span><span class="s4">:</span>
        <span class="s2">return </span><span class="s6">&quot;%s-%s.%s&quot; </span><span class="s4">% </span><span class="s3">(</span><span class="s1">osname</span><span class="s3">, </span><span class="s1">version</span><span class="s3">, </span><span class="s1">release</span><span class="s3">)</span>
    <span class="s2">elif </span><span class="s1">osname</span><span class="s5">[</span><span class="s4">:</span><span class="s7">6</span><span class="s5">] </span><span class="s4">== </span><span class="s6">&quot;cygwin&quot;</span><span class="s4">:</span>
        <span class="s1">osname </span><span class="s4">= </span><span class="s6">&quot;cygwin&quot;</span>
        <span class="s1">rel_re </span><span class="s4">= </span><span class="s1">re</span><span class="s3">.</span><span class="s1">compile</span><span class="s3">(</span><span class="s6">r'[\d.]+'</span><span class="s3">)</span>
        <span class="s1">m </span><span class="s4">= </span><span class="s1">rel_re</span><span class="s3">.</span><span class="s1">match</span><span class="s3">(</span><span class="s1">release</span><span class="s3">)</span>
        <span class="s2">if </span><span class="s1">m</span><span class="s4">:</span>
            <span class="s1">release </span><span class="s4">= </span><span class="s1">m</span><span class="s3">.</span><span class="s1">group</span><span class="s3">()</span>
    <span class="s2">elif </span><span class="s1">osname</span><span class="s5">[</span><span class="s4">:</span><span class="s7">6</span><span class="s5">] </span><span class="s4">== </span><span class="s6">&quot;darwin&quot;</span><span class="s4">:</span>
        <span class="s0">#</span>
        <span class="s0"># For our purposes, we'll assume that the system version from</span>
        <span class="s0"># distutils' perspective is what MACOSX_DEPLOYMENT_TARGET is set</span>
        <span class="s0"># to. This makes the compatibility story a bit more sane because the</span>
        <span class="s0"># machine is going to compile and link as if it were</span>
        <span class="s0"># MACOSX_DEPLOYMENT_TARGET.</span>
        <span class="s1">cfgvars </span><span class="s4">= </span><span class="s1">get_config_vars</span><span class="s3">()</span>
        <span class="s1">macver </span><span class="s4">= </span><span class="s1">cfgvars</span><span class="s3">.</span><span class="s1">get</span><span class="s3">(</span><span class="s6">'MACOSX_DEPLOYMENT_TARGET'</span><span class="s3">)</span>

        <span class="s2">if True</span><span class="s4">:</span>
            <span class="s0"># Always calculate the release of the running machine,</span>
            <span class="s0"># needed to determine if we can build fat binaries or not.</span>

            <span class="s1">macrelease </span><span class="s4">= </span><span class="s1">macver</span>
            <span class="s0"># Get the system version. Reading this plist is a documented</span>
            <span class="s0"># way to get the system version (see the documentation for</span>
            <span class="s0"># the Gestalt Manager)</span>
            <span class="s2">try</span><span class="s4">:</span>
                <span class="s1">f </span><span class="s4">= </span><span class="s1">open</span><span class="s3">(</span><span class="s6">'/System/Library/CoreServices/SystemVersion.plist'</span><span class="s3">)</span>
            <span class="s2">except </span><span class="s1">IOError</span><span class="s4">:</span>
                <span class="s0"># We're on a plain darwin box, fall back to the default</span>
                <span class="s0"># behaviour.</span>
                <span class="s2">pass</span>
            <span class="s2">else</span><span class="s4">:</span>
                <span class="s2">try</span><span class="s4">:</span>
                    <span class="s1">m </span><span class="s4">= </span><span class="s1">re</span><span class="s3">.</span><span class="s1">search</span><span class="s3">(</span><span class="s6">r'&lt;key&gt;ProductUserVisibleVersion&lt;/key&gt;\s*'</span>
                                  <span class="s6">r'&lt;string&gt;(.*?)&lt;/string&gt;'</span><span class="s3">, </span><span class="s1">f</span><span class="s3">.</span><span class="s1">read</span><span class="s3">())</span>
                <span class="s2">finally</span><span class="s4">:</span>
                    <span class="s1">f</span><span class="s3">.</span><span class="s1">close</span><span class="s3">()</span>
                <span class="s2">if </span><span class="s1">m </span><span class="s2">is not None</span><span class="s4">:</span>
                    <span class="s1">macrelease </span><span class="s4">= </span><span class="s6">'.'</span><span class="s3">.</span><span class="s1">join</span><span class="s3">(</span><span class="s1">m</span><span class="s3">.</span><span class="s1">group</span><span class="s3">(</span><span class="s7">1</span><span class="s3">).</span><span class="s1">split</span><span class="s3">(</span><span class="s6">'.'</span><span class="s3">)</span><span class="s5">[</span><span class="s4">:</span><span class="s7">2</span><span class="s5">]</span><span class="s3">)</span>
                <span class="s0"># else: fall back to the default behaviour</span>

        <span class="s2">if not </span><span class="s1">macver</span><span class="s4">:</span>
            <span class="s1">macver </span><span class="s4">= </span><span class="s1">macrelease</span>

        <span class="s2">if </span><span class="s1">macver</span><span class="s4">:</span>
            <span class="s1">release </span><span class="s4">= </span><span class="s1">macver</span>
            <span class="s1">osname </span><span class="s4">= </span><span class="s6">&quot;macosx&quot;</span>

            <span class="s2">if </span><span class="s3">((</span><span class="s1">macrelease </span><span class="s4">+ </span><span class="s6">'.'</span><span class="s3">) </span><span class="s4">&gt;= </span><span class="s6">'10.4.' </span><span class="s2">and</span>
                <span class="s6">'-arch' </span><span class="s2">in </span><span class="s1">get_config_vars</span><span class="s3">().</span><span class="s1">get</span><span class="s3">(</span><span class="s6">'CFLAGS'</span><span class="s3">, </span><span class="s6">''</span><span class="s3">).</span><span class="s1">strip</span><span class="s3">())</span><span class="s4">:</span>
                <span class="s0"># The universal build will build fat binaries, but not on</span>
                <span class="s0"># systems before 10.4</span>
                <span class="s0">#</span>
                <span class="s0"># Try to detect 4-way universal builds, those have machine-type</span>
                <span class="s0"># 'universal' instead of 'fat'.</span>

                <span class="s1">machine </span><span class="s4">= </span><span class="s6">'fat'</span>
                <span class="s1">cflags </span><span class="s4">= </span><span class="s1">get_config_vars</span><span class="s3">().</span><span class="s1">get</span><span class="s3">(</span><span class="s6">'CFLAGS'</span><span class="s3">)</span>

                <span class="s1">archs </span><span class="s4">= </span><span class="s1">re</span><span class="s3">.</span><span class="s1">findall</span><span class="s3">(</span><span class="s6">r'-arch\s+(\S+)'</span><span class="s3">, </span><span class="s1">cflags</span><span class="s3">)</span>
                <span class="s1">archs </span><span class="s4">= </span><span class="s1">tuple</span><span class="s3">(</span><span class="s1">sorted</span><span class="s3">(</span><span class="s1">set</span><span class="s3">(</span><span class="s1">archs</span><span class="s3">)))</span>

                <span class="s2">if </span><span class="s1">len</span><span class="s3">(</span><span class="s1">archs</span><span class="s3">) </span><span class="s4">== </span><span class="s7">1</span><span class="s4">:</span>
                    <span class="s1">machine </span><span class="s4">= </span><span class="s1">archs</span><span class="s5">[</span><span class="s7">0</span><span class="s5">]</span>
                <span class="s2">elif </span><span class="s1">archs </span><span class="s4">== </span><span class="s3">(</span><span class="s6">'i386'</span><span class="s3">, </span><span class="s6">'ppc'</span><span class="s3">)</span><span class="s4">:</span>
                    <span class="s1">machine </span><span class="s4">= </span><span class="s6">'fat'</span>
                <span class="s2">elif </span><span class="s1">archs </span><span class="s4">== </span><span class="s3">(</span><span class="s6">'i386'</span><span class="s3">, </span><span class="s6">'x86_64'</span><span class="s3">)</span><span class="s4">:</span>
                    <span class="s1">machine </span><span class="s4">= </span><span class="s6">'intel'</span>
                <span class="s2">elif </span><span class="s1">archs </span><span class="s4">== </span><span class="s3">(</span><span class="s6">'i386'</span><span class="s3">, </span><span class="s6">'ppc'</span><span class="s3">, </span><span class="s6">'x86_64'</span><span class="s3">)</span><span class="s4">:</span>
                    <span class="s1">machine </span><span class="s4">= </span><span class="s6">'fat3'</span>
                <span class="s2">elif </span><span class="s1">archs </span><span class="s4">== </span><span class="s3">(</span><span class="s6">'ppc64'</span><span class="s3">, </span><span class="s6">'x86_64'</span><span class="s3">)</span><span class="s4">:</span>
                    <span class="s1">machine </span><span class="s4">= </span><span class="s6">'fat64'</span>
                <span class="s2">elif </span><span class="s1">archs </span><span class="s4">== </span><span class="s3">(</span><span class="s6">'i386'</span><span class="s3">, </span><span class="s6">'ppc'</span><span class="s3">, </span><span class="s6">'ppc64'</span><span class="s3">, </span><span class="s6">'x86_64'</span><span class="s3">)</span><span class="s4">:</span>
                    <span class="s1">machine </span><span class="s4">= </span><span class="s6">'universal'</span>
                <span class="s2">else</span><span class="s4">:</span>
                    <span class="s2">raise </span><span class="s1">ValueError</span><span class="s3">(</span>
                       <span class="s6">&quot;Don't know machine value for archs=%r&quot; </span><span class="s4">% </span><span class="s3">(</span><span class="s1">archs</span><span class="s3">,))</span>

            <span class="s2">elif </span><span class="s1">machine </span><span class="s4">== </span><span class="s6">'i386'</span><span class="s4">:</span>
                <span class="s0"># On OSX the machine type returned by uname is always the</span>
                <span class="s0"># 32-bit variant, even if the executable architecture is</span>
                <span class="s0"># the 64-bit variant</span>
                <span class="s2">if </span><span class="s1">sys</span><span class="s3">.</span><span class="s1">maxsize </span><span class="s4">&gt;= </span><span class="s7">2</span><span class="s4">**</span><span class="s7">32</span><span class="s4">:</span>
                    <span class="s1">machine </span><span class="s4">= </span><span class="s6">'x86_64'</span>

            <span class="s2">elif </span><span class="s1">machine </span><span class="s2">in </span><span class="s3">(</span><span class="s6">'PowerPC'</span><span class="s3">, </span><span class="s6">'Power_Macintosh'</span><span class="s3">)</span><span class="s4">:</span>
                <span class="s0"># Pick a sane name for the PPC architecture.</span>
                <span class="s0"># See 'i386' case</span>
                <span class="s2">if </span><span class="s1">sys</span><span class="s3">.</span><span class="s1">maxsize </span><span class="s4">&gt;= </span><span class="s7">2</span><span class="s4">**</span><span class="s7">32</span><span class="s4">:</span>
                    <span class="s1">machine </span><span class="s4">= </span><span class="s6">'ppc64'</span>
                <span class="s2">else</span><span class="s4">:</span>
                    <span class="s1">machine </span><span class="s4">= </span><span class="s6">'ppc'</span>

    <span class="s2">return </span><span class="s6">&quot;%s-%s-%s&quot; </span><span class="s4">% </span><span class="s3">(</span><span class="s1">osname</span><span class="s3">, </span><span class="s1">release</span><span class="s3">, </span><span class="s1">machine</span><span class="s3">)</span>


<span class="s2">def </span><span class="s1">get_python_version</span><span class="s3">()</span><span class="s4">:</span>
    <span class="s2">return </span><span class="s1">_PY_VERSION_SHORT</span>


<span class="s2">def </span><span class="s1">_print_dict</span><span class="s3">(</span><span class="s1">title</span><span class="s3">, </span><span class="s1">data</span><span class="s3">)</span><span class="s4">:</span>
    <span class="s2">for </span><span class="s1">index</span><span class="s3">, (</span><span class="s1">key</span><span class="s3">, </span><span class="s1">value</span><span class="s3">) </span><span class="s2">in </span><span class="s1">enumerate</span><span class="s3">(</span><span class="s1">sorted</span><span class="s3">(</span><span class="s1">data</span><span class="s3">.</span><span class="s1">items</span><span class="s3">()))</span><span class="s4">:</span>
        <span class="s2">if </span><span class="s1">index </span><span class="s4">== </span><span class="s7">0</span><span class="s4">:</span>
            <span class="s1">print</span><span class="s3">(</span><span class="s6">'%s: ' </span><span class="s4">% </span><span class="s3">(</span><span class="s1">title</span><span class="s3">))</span>
        <span class="s1">print</span><span class="s3">(</span><span class="s6">'\t%s = &quot;%s&quot;' </span><span class="s4">% </span><span class="s3">(</span><span class="s1">key</span><span class="s3">, </span><span class="s1">value</span><span class="s3">))</span>


<span class="s2">def </span><span class="s1">_main</span><span class="s3">()</span><span class="s4">:</span>
    <span class="s0">&quot;&quot;&quot;Display all information sysconfig detains.&quot;&quot;&quot;</span>
    <span class="s1">print</span><span class="s3">(</span><span class="s6">'Platform: &quot;%s&quot;' </span><span class="s4">% </span><span class="s1">get_platform</span><span class="s3">())</span>
    <span class="s1">print</span><span class="s3">(</span><span class="s6">'Python version: &quot;%s&quot;' </span><span class="s4">% </span><span class="s1">get_python_version</span><span class="s3">())</span>
    <span class="s1">print</span><span class="s3">(</span><span class="s6">'Current installation scheme: &quot;%s&quot;' </span><span class="s4">% </span><span class="s1">_get_default_scheme</span><span class="s3">())</span>
    <span class="s1">print</span><span class="s3">()</span>
    <span class="s1">_print_dict</span><span class="s3">(</span><span class="s6">'Paths'</span><span class="s3">, </span><span class="s1">get_paths</span><span class="s3">())</span>
    <span class="s1">print</span><span class="s3">()</span>
    <span class="s1">_print_dict</span><span class="s3">(</span><span class="s6">'Variables'</span><span class="s3">, </span><span class="s1">get_config_vars</span><span class="s3">())</span>


<span class="s2">if </span><span class="s1">__name__ </span><span class="s4">== </span><span class="s6">'__main__'</span><span class="s4">:</span>
    <span class="s1">_main</span><span class="s3">()</span>
</pre>
</body>
</html>